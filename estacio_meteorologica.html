<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="estacio_meteorologica.css">
    </head>
    <body>
        <div id="demo"></div>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>
       (function() {
            $.getJSON("http://api.openweathermap.org/data/2.5/weather?lat=41.6333&lon=0.9&appid=b33675d254b3894f1d636da10bb334b9&units=metric&mode=json")
                .done(function(data) {
                    console.log(data);
                    var ciutat = data.name;
                    var temperatura = data.main.temp;
                    var humitat = data.main.humidity;
                    var pressio = data.main.pressure;
                    var unix_sunset = data.sys.sunset;
                    var unix_sunrise = data.sys.sunrise;
                    var direccioVent = data.wind.deg;
                    var velocitatVent = data.wind.speed;
                    var descripcioTemps = data.weather.description;
                   
                    function unixAData(temps_unix) {
                        var date = new Date(temps_unix * 1000);
                        var hours = date.getHours();
                        var minutes = "0" + date.getMinutes();
                        var seconds = "0" + date.getSeconds();
                        var tempsFormatejat = hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);
                        return tempsFormatejat;
                    }

                    console.log("sortida: "+unixAData(unix_sunrise));
                    console.log("posta: "+unixAData(unix_sunset));
                    

                $('#demo').html("<p>"+ciutat+"</p>");
                
            });
        })();
        </script>

    </body>
</html>

